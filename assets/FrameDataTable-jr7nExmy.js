import{r as Bt,V as Mt,j as r,s as Ve,u as Ft,v as We,w as Ge,x as _t,y as Pe,z as qe,A as Ke,B as Et,L as Je,E as Ut,l as we,F as At,H as Xe,J as zt,a as Vt,k as Qe,m as $e,K as Wt,X as Gt,M as Pt,N as qt,Q as Kt,W as Ye,Y as Ze,Z as Oe,$ as et,a0 as tt,a1 as st,a2 as lt,a3 as nt,a4 as at,a5 as Jt,a6 as Xt,a7 as Qt,a8 as Yt}from"./ui-C9uFtWMF.js";import{r as m,c as Z,f as Zt,u as Ot}from"./vendor-DZJxrHEo.js";import{C as Me,a as Fe,b as _e,c as Ee,d as Ue,e as es}from"./card-RrWFcSC-.js";import{c as F,a as B,P as rt,B as ye,C as it,b as ot,d as ct,e as dt,f as ut,g as mt,h as ft,i as pt,u as je,j as ts,k as ss,l as ls}from"./index-DFlexWP6.js";import{u as ns,a as as}from"./table-C4-9HXlu.js";const Ae=Bt,ze=Mt,ve=m.forwardRef((i,t)=>{const e=F.c(12);let n,s,l;e[0]!==i?({className:s,children:n,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);let a;e[4]!==s?(a=B("flex h-10 w-full items-center justify-between rounded-md border border-input bg-secondary px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),e[4]=s,e[5]=a):a=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(_t,{children:r.jsx(Pe,{className:"h-4 w-4 opacity-50"})}),e[6]=o):o=e[6];let d;return e[7]!==n||e[8]!==l||e[9]!==t||e[10]!==a?(d=r.jsxs(Ve,{ref:t,className:a,...l,children:[n,o]}),e[7]=n,e[8]=l,e[9]=t,e[10]=a,e[11]=d):d=e[11],d});ve.displayName=Ve.displayName;const ht=m.forwardRef((i,t)=>{const e=F.c(10);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=l):l=e[4];let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(zt,{className:"h-4 w-4"}),e[5]=a):a=e[5];let o;return e[6]!==s||e[7]!==t||e[8]!==l?(o=r.jsx(qe,{ref:t,className:l,...s,children:a}),e[6]=s,e[7]=t,e[8]=l,e[9]=o):o=e[9],o});ht.displayName=qe.displayName;const xt=m.forwardRef((i,t)=>{const e=F.c(10);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("flex cursor-default items-center justify-center py-1",n),e[3]=n,e[4]=l):l=e[4];let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Pe,{className:"h-4 w-4"}),e[5]=a):a=e[5];let o;return e[6]!==s||e[7]!==t||e[8]!==l?(o=r.jsx(Ke,{ref:t,className:l,...s,children:a}),e[6]=s,e[7]=t,e[8]=l,e[9]=o):o=e[9],o});xt.displayName=Ke.displayName;const Se=m.forwardRef((i,t)=>{const e=F.c(21);let n,s,l,a;e[0]!==i?({className:s,children:n,position:a,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l,e[4]=a):(n=e[1],s=e[2],l=e[3],a=e[4]);const o=a===void 0?"popper":a,d=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let u;e[5]!==s||e[6]!==d?(u=B("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-secondary text-secondary-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",d,s),e[5]=s,e[6]=d,e[7]=u):u=e[7];let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(ht,{}),e[8]=f):f=e[8];const y=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";let D;e[9]!==y?(D=B("p-1",y),e[9]=y,e[10]=D):D=e[10];let C;e[11]!==n||e[12]!==D?(C=r.jsx(Et,{className:D,children:n}),e[11]=n,e[12]=D,e[13]=C):C=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(xt,{}),e[14]=x):x=e[14];let R;return e[15]!==o||e[16]!==l||e[17]!==t||e[18]!==u||e[19]!==C?(R=r.jsx(Ft,{children:r.jsxs(We,{ref:t,className:u,position:o,...l,children:[f,C,x]})}),e[15]=o,e[16]=l,e[17]=t,e[18]=u,e[19]=C,e[20]=R):R=e[20],R});Se.displayName=We.displayName;const rs=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("py-1.5 pl-8 pr-2 text-sm font-semibold",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx(Je,{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});rs.displayName=Je.displayName;const De=m.forwardRef((i,t)=>{const e=F.c(14);let n,s,l;e[0]!==i?({className:s,children:n,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);let a;e[4]!==s?(a=B("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),e[4]=s,e[5]=a):a=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Ut,{children:r.jsx(we,{className:"h-4 w-4"})})}),e[6]=o):o=e[6];let d;e[7]!==n?(d=r.jsx(At,{children:n}),e[7]=n,e[8]=d):d=e[8];let u;return e[9]!==l||e[10]!==t||e[11]!==a||e[12]!==d?(u=r.jsxs(Ge,{ref:t,className:a,...l,children:[o,d]}),e[9]=l,e[10]=t,e[11]=a,e[12]=d,e[13]=u):u=e[13],u});De.displayName=Ge.displayName;const is=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("-mx-1 my-1 h-px bg-muted",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx(Xe,{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});is.displayName=Xe.displayName;const Ne=m.forwardRef((i,t)=>{const e=F.c(11);let n,s,l;e[0]!==i?({className:n,type:l,...s}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);let a;e[4]!==n?(a=B("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),e[4]=n,e[5]=a):a=e[5];let o;return e[6]!==s||e[7]!==t||e[8]!==a||e[9]!==l?(o=r.jsx("input",{type:l,className:a,ref:t,...s}),e[6]=s,e[7]=t,e[8]=a,e[9]=l,e[10]=o):o=e[10],o});Ne.displayName="Input";const os=Vt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80 [-webkit-text-stroke:3px_#262626] [paint-order:stroke]",outline:"text-foreground",success:"border-transparent bg-green-500 text-white dark:bg-green-700 [-webkit-text-stroke:3px_#262626] [paint-order:stroke]"}},defaultVariants:{variant:"default"}}),he=m.forwardRef((i,t)=>{const e=F.c(11);let n,s,l;e[0]!==i?({className:n,variant:l,...s}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);let a;e[4]!==n||e[5]!==l?(a=B(os({variant:l}),n),e[4]=n,e[5]=l,e[6]=a):a=e[6];let o;return e[7]!==s||e[8]!==t||e[9]!==a?(o=r.jsx("div",{ref:t,className:a,...s}),e[7]=s,e[8]=t,e[9]=a,e[10]=o):o=e[10],o});he.displayName="Badge";const gt=[{id:"input",label:"Input",type:"text"},{id:"stance",label:"Stance",type:"text"},{id:"command",label:"Command",type:"text"},{id:"hitLevel",label:"Hit Level",type:"text"},{id:"impact",label:"Impact",type:"number"},{id:"damage",label:"Damage",type:"number"},{id:"block",label:"Block",type:"number"},{id:"hit",label:"Hit",type:"number"},{id:"counterHit",label:"Counter Hit",type:"number"},{id:"guardBurst",label:"Guard Burst",type:"number"},{id:"notes",label:"Notes",type:"text"},{id:"character",label:"Character",type:"text"}],cs=[{value:":H:"},{value:":M:"},{value:":L:"},{value:":SM:"},{value:":SL:"}];function ds(i){return{...i,type:"enum",allowedOperators:["inList"],options:cs}}const us=()=>gt.map(i=>({...i})),ms={id:"inList",label:"In List",input:"multi",appliesTo:["enum"],test:({fieldString:i,value:t})=>{if(!i)return!1;const e=(t??"").split(",").map(a=>a.trim()).filter(Boolean);if(e.length===0)return!1;const n=i.split(/:+/).map(a=>a.trim().toLowerCase()).filter(Boolean),s=new Set(n),l=i.toLowerCase();return e.some(a=>{const o=a.toLowerCase(),d=a.replace(/:+/g,"").toLowerCase();return s.has(d)||l.includes(o)})}},fs=us().map(i=>i.id==="hitLevel"?ds(i):i),bt={SoulCalibur6:{fields:fs,customOperators:[ms]},Tekken8:{fields:gt,customOperators:[{id:"endsWith",label:"Ends With",input:"single",appliesTo:["text"],test:({fieldString:i,value:t})=>(i??"").toLowerCase().endsWith((t??"").toLowerCase())}]}},Nt=[{id:"equals",label:"Equals",input:"single",appliesTo:["text","number","enum"],test:({fieldString:i,fieldNumber:t,value:e,fieldType:n})=>{if(n==="number"){const l=e!=null?Number(e):NaN;return t!=null&&!isNaN(l)&&t===l}const s=(e??"").toLowerCase();return(i??"").toLowerCase()===s}},{id:"notEquals",label:"Not Equals",input:"single",appliesTo:["text","number","enum"],test:({fieldString:i,fieldNumber:t,value:e,fieldType:n})=>{if(n==="number"){const l=e!=null?Number(e):NaN;return!(t!=null&&!isNaN(l)&&t===l)}const s=(e??"").toLowerCase();return(i??"").toLowerCase()!==s}},{id:"contains",label:"Contains",input:"single",appliesTo:["text"],test:({fieldString:i,value:t})=>(i??"").toLowerCase().includes((t??"").toLowerCase())},{id:"startsWith",label:"Starts With",input:"single",appliesTo:["text"],test:({fieldString:i,value:t})=>(i??"").toLowerCase().startsWith((t??"").toLowerCase())},{id:"greaterThan",label:"Greater Than",input:"single",appliesTo:["number"],test:({fieldNumber:i,value:t})=>{const e=t!=null?Number(t):NaN;return i!=null&&!isNaN(e)&&i>e}},{id:"lessThan",label:"Less Than",input:"single",appliesTo:["number"],test:({fieldNumber:i,value:t})=>{const e=t!=null?Number(t):NaN;return i!=null&&!isNaN(e)&&i<e}},{id:"between",label:"Between",input:"range",appliesTo:["number"],test:({fieldNumber:i,value:t,value2:e})=>{const n=t!=null?Number(t):NaN,s=e!=null?Number(e):NaN;if(i==null||isNaN(n)||isNaN(s))return!1;const l=Math.min(n,s),a=Math.max(n,s);return i>=l&&i<=a}},{id:"notBetween",label:"Not Between",input:"range",appliesTo:["number"],test:({fieldNumber:i,value:t,value2:e})=>{const n=t!=null?Number(t):NaN,s=e!=null?Number(e):NaN;if(i==null||isNaN(n)||isNaN(s))return!1;const l=Math.min(n,s),a=Math.max(n,s);return i<l||i>a}}],wt=i=>{const t=new Map;for(const e of i)t.set(e.id,e);return t};function ps(i){const t=F.c(42),{value:e,onChange:n,options:s,placeholder:l,emptyText:a,className:o,maxPreview:d}=i,u=l===void 0?"Select...":l,f=a===void 0?"No results found.":a,y=d===void 0?3:d,[D,C]=m.useState(!1);let x,R;t[0]!==e?(R=new Set(e),t[0]=e,t[1]=R):R=t[1],x=R;const w=x;let W;t[2]!==n||t[3]!==w?(W=v=>{const U=new Set(w);U.has(v)?U.delete(v):U.add(v),n(Array.from(U))},t[2]=n,t[3]=w,t[4]=W):W=t[4];const G=W;let P;e:{let v,U;if(t[5]!==y||t[6]!==s||t[7]!==u||t[8]!==w){let H;if(t[12]!==w?(H=ce=>w.has(ce.value),t[12]=w,t[13]=H):H=t[13],v=s.filter(H).map(hs),v.length===0){P=u;break e}if(v.length<=y){P=v.join(", ");break e}U=v.slice(0,y).join(", "),t[5]=y,t[6]=s,t[7]=u,t[8]=w,t[9]=v,t[10]=U,t[11]=P}else v=t[9],U=t[10],P=t[11];P=`${U} +${v.length-y}`}const _=P;let h;t[14]!==o?(h=B("h-10 px-3 text-sm justify-between w-[180px] custom-select-trigger bg-secondary border border-input rounded-md",o),t[14]=o,t[15]=h):h=t[15];let g;t[16]!==_?(g=r.jsx("span",{className:"truncate",children:_}),t[16]=_,t[17]=g):g=t[17];let j;t[18]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx(Qe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),t[18]=j):j=t[18];let p;t[19]!==D||t[20]!==h||t[21]!==g?(p=r.jsx(rt,{asChild:!0,children:r.jsxs(ye,{variant:"outline",role:"combobox","aria-expanded":D,className:h,children:[g,j]})}),t[19]=D,t[20]=h,t[21]=g,t[22]=p):p=t[22];let N;t[23]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(it,{placeholder:"Search..."}),t[23]=N):N=t[23];let $;t[24]!==f?($=r.jsx(ot,{children:f}),t[24]=f,t[25]=$):$=t[25];let E;if(t[26]!==s||t[27]!==w||t[28]!==G){let v;t[30]!==w||t[31]!==G?(v=U=>{const K=w.has(U.value);return r.jsxs(ct,{value:U.label,onSelect:()=>G(U.value),children:[r.jsx(we,{className:B("mr-2 h-4 w-4",K?"opacity-100":"opacity-0")}),U.label]},U.value)},t[30]=w,t[31]=G,t[32]=v):v=t[32],E=s.map(v),t[26]=s,t[27]=w,t[28]=G,t[29]=E}else E=t[29];let b;t[33]!==E?(b=r.jsx(dt,{children:E}),t[33]=E,t[34]=b):b=t[34];let S;t[35]!==$||t[36]!==b?(S=r.jsx(ut,{className:"p-0 bg-secondary text-secondary-foreground border border-input",children:r.jsxs(mt,{children:[N,r.jsxs(ft,{children:[$,b]})]})}),t[35]=$,t[36]=b,t[37]=S):S=t[37];let M;return t[38]!==D||t[39]!==p||t[40]!==S?(M=r.jsxs(pt,{open:D,onOpenChange:C,children:[p,S]}),t[38]=D,t[39]=p,t[40]=S,t[41]=M):M=t[41],M}function hs(i){return i.label}const yt=Z.memo(i=>{const t=F.c(8),{level:e}=i;let n="bg-gray-400";e:switch(e.toUpperCase()){case"M":{n="bg-yellow-500";break e}case"L":{n="bg-cyan-500";break e}case"H":{n="bg-pink-500";break e}case"SM":{n="bg-purple-500";break e}case"SL":{n="bg-cyan-500";break e}case"SH":n="bg-orange-500"}const s=`w-full h-full rounded-full flex items-center justify-center text-xs font-bold ${n} text-white`;let l;t[0]!==e?(l=e.length>1&&["SL","SH","SM"].includes(e.toUpperCase())?e.toUpperCase():e.charAt(0).toUpperCase(),t[0]=e,t[1]=l):l=t[1];let a;t[2]!==s||t[3]!==l?(a=r.jsx("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center p-px",children:r.jsx("div",{className:s,children:l})}),t[2]=s,t[3]=l,t[4]=a):a=t[4];let o;return t[5]!==e||t[6]!==a?(o=r.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-800 flex items-center justify-center p-px ring-1 ring-black",title:e,children:a}),t[5]=e,t[6]=a,t[7]=o):o=t[7],o}),jt=Z.memo(({hitLevelString:i,maxIconsToShow:t=3})=>{const[e,n]=Z.useState(!1),s=Z.useMemo(()=>i?i.split(/:+/).map(u=>u.trim()).filter(Boolean):[],[i]),l=s.length>t+1,a=Z.useCallback(()=>{l&&n(u=>!u)},[l]);if(s.length===0)return r.jsx("span",{className:"text-muted-foreground",children:"—"});let o;s.length<=t+1?o=s.length:o=e?s.length:t;const d=l&&!e;return r.jsxs("div",{className:`flex flex-wrap items-center gap-1 ${l?"cursor-pointer":""}`,onClick:l?a:void 0,children:[s.slice(0,o).map((u,f)=>r.jsx("div",{children:r.jsx(yt,{level:u})},`${u}-${f}`)),d&&r.jsx($e,{size:16,className:"text-muted-foreground ml-1"})]})}),xs=i=>{const t=F.c(36),{value:e,onChange:n,options:s,placeholder:l,className:a,maxPreview:o}=i,d=l===void 0?"Select...":l,u=o===void 0?5:o,[f,y]=m.useState(!1);let D,C;t[0]!==e?(C=new Set(e),t[0]=e,t[1]=C):C=t[1],D=C;const x=D;let R;t[2]!==n||t[3]!==x?(R=b=>{const S=new Set(x);S.has(b)?S.delete(b):S.add(b),n(Array.from(S))},t[2]=n,t[3]=x,t[4]=R):R=t[4];const w=R;let W;e:{if(x.size===0){W=null;break e}let b;if(t[5]!==s||t[6]!==x){let S;t[8]!==x?(S=M=>x.has(M.value),t[8]=x,t[9]=S):S=t[9],b=s.filter(S).map(gs).join(""),t[5]=s,t[6]=x,t[7]=b}else b=t[7];W=b}const G=W;let P;t[10]!==a?(P=B("h-10 px-3 text-sm justify-between w-[180px] custom-select-trigger bg-secondary border border-input rounded-md",a),t[10]=a,t[11]=P):P=t[11];let _;t[12]!==G||t[13]!==u||t[14]!==d?(_=r.jsx("span",{className:"truncate flex items-center gap-1",children:G?r.jsx(jt,{hitLevelString:G,maxIconsToShow:u}):r.jsx("span",{className:"text-muted-foreground",children:d})}),t[12]=G,t[13]=u,t[14]=d,t[15]=_):_=t[15];let h;t[16]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(Qe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),t[16]=h):h=t[16];let g;t[17]!==f||t[18]!==P||t[19]!==_?(g=r.jsx(rt,{asChild:!0,children:r.jsxs(ye,{variant:"outline",role:"combobox","aria-expanded":f,className:P,children:[_,h]})}),t[17]=f,t[18]=P,t[19]=_,t[20]=g):g=t[20];let j;t[21]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx(it,{placeholder:"Search..."}),t[21]=j):j=t[21];let p;t[22]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(ot,{children:"No results."}),t[22]=p):p=t[22];let N;if(t[23]!==s||t[24]!==x||t[25]!==w){let b;t[27]!==x||t[28]!==w?(b=S=>{const M=x.has(S.value),v=S.value.replace(/:/g,"").toUpperCase();return r.jsxs(ct,{value:v,onSelect:()=>w(S.value),className:"flex items-center gap-2",children:[r.jsx(we,{className:B("h-4 w-4",M?"opacity-100":"opacity-0")}),r.jsx(yt,{level:v}),r.jsx("span",{className:"text-xs font-medium",children:v})]},S.value)},t[27]=x,t[28]=w,t[29]=b):b=t[29],N=s.map(b),t[23]=s,t[24]=x,t[25]=w,t[26]=N}else N=t[26];let $;t[30]!==N?($=r.jsx(ut,{className:"p-0 bg-secondary text-secondary-foreground border border-input",children:r.jsxs(mt,{children:[j,r.jsxs(ft,{children:[p,r.jsx(dt,{children:N})]})]})}),t[30]=N,t[31]=$):$=t[31];let E;return t[32]!==f||t[33]!==g||t[34]!==$?(E=r.jsxs(pt,{open:f,onOpenChange:y,children:[g,$]}),t[32]=f,t[33]=g,t[34]=$,t[35]=E):E=t[35],E};function gs(i){return i.value}const bs=i=>{const t=F.c(6),{count:e,className:n}=i;let s;t[0]!==n?(s=B("ml-2 text-xs font-normal",n),t[0]=n,t[1]=s):s=t[1];const l=e===1?"filter":"filters";let a;return t[2]!==e||t[3]!==s||t[4]!==l?(a=r.jsxs(he,{variant:"outline",className:s,children:[e," ",l]}),t[2]=e,t[3]=s,t[4]=l,t[5]=a):a=t[5],a},Ct=Z.memo(({onFiltersChange:i,className:t,moves:e=[]})=>{const{selectedGame:n}=je(),s=m.useMemo(()=>bt[n.id]??{fields:[]},[n.id]),l=m.useMemo(()=>{const h=s.customOperators??[],g=new Map;for(const j of Nt)g.set(j.id,j);for(const j of h)g.set(j.id,j);return Array.from(g.values())},[s]),a=m.useMemo(()=>wt(l),[l]),o=m.useMemo(()=>new Map(s.fields.map(h=>[h.id,h])),[s.fields]),[d,u]=m.useState([]),f=m.useRef(!1),[y,D]=m.useState({}),C=m.useRef(null);m.useEffect(()=>{if(e.length>0){const h={};Object.assign(h,{impact:{min:0,max:500},damage:{min:0,max:500},block:{min:-30,max:500},hit:{min:-30,max:30},counterHit:{min:-30,max:30},guardBurst:{min:0,max:100}});const j=(p,N)=>{switch(N){case"impact":return p.Impact??null;case"damage":return p.DamageDec??null;case"block":return p.BlockDec??null;case"hit":return p.HitDec??null;case"counterHit":return p.CounterHitDec??null;case"guardBurst":return p.GuardBurst??null;default:return null}};s.fields.forEach(p=>{if(p.type==="number"){let N=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,E=!1;if(e.forEach(b=>{const S=j(b,p.id);S!=null&&!isNaN(S)&&(N=Math.min(N,S),$=Math.max($,S),E=!0)}),E){const b=Math.max(1,Math.round(($-N)*.1));h[p.id]={min:Math.floor(N-b),max:Math.ceil($+b)}}}}),D(h)}},[e,s.fields]);const x=m.useCallback(h=>{const g=o.get(h);return g?g.type:"text"},[o]),R=m.useCallback(h=>{const g=a.get(h);return g?g.input==="range":!1},[a]),w=h=>{const g=o.get(h);if(!g)return l;const j=g.allowedOperators&&g.allowedOperators.length>0?new Set(g.allowedOperators):null;return l.filter(p=>p.appliesTo.includes(g.type)&&(!j||j.has(p.id)))},W=m.useMemo(()=>d.filter(h=>h.condition==="between"||h.condition==="notBetween"?h.value.trim()!==""&&h.value2!=null&&h.value2.trim()!=="":h.value.trim()!==""),[d]);m.useEffect(()=>{const h=JSON.stringify(W);h!==C.current&&(typeof Z.startTransition=="function"?Z.startTransition(()=>i(W)):i(W),C.current=h)},[W,i]),m.useEffect(()=>{d.length===0&&!f.current&&(G(),f.current=!0)},[d.length]);const G=m.useCallback(()=>{var S,M;const h="input",g=s.fields.some(v=>v.id===h),j="impact",p=g?h:s.fields.some(v=>v.id===j)?j:((S=s.fields[0])==null?void 0:S.id)??h,N=x(p),E=((M=w(p)[0])==null?void 0:M.id)??"equals",b={id:`filter-${Date.now()}`,field:p,numericField:N==="number"?p:null,condition:E,value:"",value2:""};u(v=>[...v,b])},[s.fields,x]),P=m.useCallback(h=>{u(g=>{var j,p;if(g.length===1){const N="input",$=s.fields.some(M=>M.id===N),E="impact",b=$?N:s.fields.some(M=>M.id===E)?E:((j=s.fields[0])==null?void 0:j.id)??N,S=x(b);return[{id:`filter-${Date.now()}`,field:b,numericField:S==="number"?b:null,condition:((p=w(b)[0])==null?void 0:p.id)??"equals",value:"",value2:""}]}else return g.filter(N=>N.id!==h)})},[s.fields,x]),_=m.useCallback((h,g,j)=>{const p=()=>u(N=>N.map($=>{var E;if($.id===h){const b={...$,[g]:j},S=M=>M==="between"||M==="notBetween";if(g==="field"){const M=x($.field),v=x(j);b.numericField=v==="number"?j:null;const U=w(j);U.some(K=>K.id===$.condition)||(b.condition=((E=U[0])==null?void 0:E.id)||"equals"),M!==v&&(b.value="",b.value2="")}else g==="condition"&&!S(j)&&S($.condition)&&(b.value2="");return b}return $}));if((g==="value"||g==="value2")&&typeof Z.startTransition=="function"){Z.startTransition(p);return}p()},[x]);return r.jsx("div",{className:B("mb-4 custom-filter-builder",t),children:r.jsxs("div",{className:"p-4 border rounded-md bg-card space-y-4",children:[r.jsx("div",{className:"space-y-2",children:d.map(h=>{const g=x(h.field),j=w(h.field),p=R(h.condition),N=p?h.value.trim()!==""&&h.value2!=null&&h.value2.trim()!=="":h.value.trim()!=="";return r.jsx(vt,{filter:h,isActive:N,fieldType:g,availableConditions:j,showRange:p,updateFilter:_,removeFilter:P,fields:s.fields},h.id)})}),r.jsx("div",{className:"flex justify-start items-center",children:r.jsxs(ye,{variant:"outline",size:"sm",className:"flex items-center gap-1",onClick:G,children:[r.jsx(Wt,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:"Add Filter"})]})})]})})});Ct.displayName="FilterBuilder";const vt=Z.memo(i=>{var G;const t=F.c(54),{filter:e,isActive:n,fieldType:s,availableConditions:l,showRange:a,updateFilter:o,removeFilter:d,fields:u}=i;let f,y,D,C;if(t[0]!==l||t[1]!==s||t[2]!==u||t[3]!==e.condition||t[4]!==e.field||t[5]!==e.id||t[6]!==e.value||t[7]!==e.value2||t[8]!==n||t[9]!==a||t[10]!==o){let P;t[15]!==e.field?(P=H=>H.id===e.field,t[15]=e.field,t[16]=P):P=t[16];const _=u.find(P),h=s==="enum",g=((G=l.find(H=>H.id===e.condition))==null?void 0:G.input)==="multi";f=`flex items-center gap-2 filter-row ${n?"active":"inactive"}`;const j=e.field;let p;t[17]!==e.id||t[18]!==o?(p=H=>H&&o(e.id,"field",H),t[17]=e.id,t[18]=o,t[19]=p):p=t[19];let N;t[20]!==u?(N=u.map(Ns),t[20]=u,t[21]=N):N=t[21],t[22]!==e.field||t[23]!==p||t[24]!==N?(y=r.jsx(ts,{value:j,onChange:p,options:N,placeholder:"Field",className:"w-[160px]"}),t[22]=e.field,t[23]=p,t[24]=N,t[25]=y):y=t[25];const $=l.length<=1,E=e.condition;let b;t[26]!==$||t[27]!==e.id||t[28]!==o?(b=H=>{$||o(e.id,"condition",H)},t[26]=$,t[27]=e.id,t[28]=o,t[29]=b):b=t[29];let S;t[30]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(ze,{placeholder:"Condition"}),t[30]=S):S=t[30];let M;t[31]!==$?(M=r.jsx(ve,{className:"w-[140px] custom-select-trigger",disabled:$,children:S}),t[31]=$,t[32]=M):M=t[32];let v;t[33]!==l?(v=l.map(ws),t[33]=l,t[34]=v):v=t[34];let U;t[35]!==v?(U=r.jsx(Se,{children:v}),t[35]=v,t[36]=U):U=t[36];let K;t[37]!==e.condition||t[38]!==b||t[39]!==M||t[40]!==U?(K=r.jsxs(Ae,{value:E,onValueChange:b,children:[M,U]}),t[37]=e.condition,t[38]=b,t[39]=M,t[40]=U,t[41]=K):K=t[41],D=K,C=a?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ne,{type:s==="number"?"number":"text",value:e.value,onChange:H=>o(e.id,"value",H.target.value),placeholder:"Min",className:"w-[80px] custom-input text-sm h-8"}),r.jsx("span",{className:"text-muted-foreground",children:"-"}),r.jsx(Ne,{type:s==="number"?"number":"text",value:e.value2||"",onChange:H=>o(e.id,"value2",H.target.value),placeholder:"Max",className:"w-[80px] custom-input text-sm h-8"})]}):h?g?(_==null?void 0:_.id)==="hitLevel"?r.jsx(xs,{value:(e.value||"").split(",").map(ys).filter(Boolean),onChange:H=>o(e.id,"value",H.join(",")),options:((_==null?void 0:_.options)??[]).map(js),placeholder:"Select..."}):r.jsx(ps,{value:(e.value||"").split(",").map(Cs).filter(Boolean),onChange:H=>o(e.id,"value",H.join(",")),options:((_==null?void 0:_.options)??[]).map(vs),placeholder:"Select..."}):r.jsxs(Ae,{value:e.value,onValueChange:H=>o(e.id,"value",H),children:[r.jsx(ve,{className:"w-[180px] custom-select-trigger",children:r.jsx(ze,{placeholder:"Select"})}),r.jsx(Se,{children:((_==null?void 0:_.options)??[]).map(Ss)})]}):r.jsx(Ne,{type:s==="number"?"number":"text",value:e.value,onChange:H=>o(e.id,"value",H.target.value),placeholder:"Value",className:"w-[180px] custom-input"}),t[0]=l,t[1]=s,t[2]=u,t[3]=e.condition,t[4]=e.field,t[5]=e.id,t[6]=e.value,t[7]=e.value2,t[8]=n,t[9]=a,t[10]=o,t[11]=f,t[12]=y,t[13]=D,t[14]=C}else f=t[11],y=t[12],D=t[13],C=t[14];let x;t[42]!==e.id||t[43]!==d?(x=()=>d(e.id),t[42]=e.id,t[43]=d,t[44]=x):x=t[44];let R;t[45]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx(Gt,{className:"h-4 w-4"}),t[45]=R):R=t[45];let w;t[46]!==x?(w=r.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 hover:bg-destructive/20",onClick:x,children:R}),t[46]=x,t[47]=w):w=t[47];let W;return t[48]!==f||t[49]!==y||t[50]!==D||t[51]!==C||t[52]!==w?(W=r.jsxs("div",{className:f,children:[y,D,C,w]}),t[48]=f,t[49]=y,t[50]=D,t[51]=C,t[52]=w,t[53]=W):W=t[53],W},(i,t)=>i.filter===t.filter&&i.isActive===t.isActive&&i.fieldType===t.fieldType&&i.showRange===t.showRange&&i.availableConditions===t.availableConditions&&i.fields===t.fields);vt.displayName="FilterRow";function Ns(i){return{label:i.label,value:i.id}}function ws(i){return r.jsx(De,{value:i.id,children:i.label},i.id)}function ys(i){return i.trim()}function js(i){return{value:i.value}}function Cs(i){return i.trim()}function vs(i){return{label:i.label??i.value,value:i.value}}function Ss(i){return r.jsx(De,{value:i.value,children:i.label??i.value},i.value)}const ks=Z.memo(i=>{const t=F.c(11),{input:e,isHeld:n,isSlide:s}=i,l=s?"w-4 h-4 text-[13px]":"w-5 h-5 text-[16px]",a=s?"":"mx-0.25",o=s?"self-end":"",d=n?"bg-black text-white border border-white rounded":"border border-black bg-white text-black rounded";let u;t[0]!==a||t[1]!==l||t[2]!==o||t[3]!==d?(u=B("inline-flex items-center justify-center font-bold align-middle font-sans",l,a,o,"button-icon","relative z-10",d),t[0]=a,t[1]=l,t[2]=o,t[3]=d,t[4]=u):u=t[4];const f=`${e} Button${n?" (Held)":""}`;let y;t[5]!==e?(y=e.toUpperCase(),t[5]=e,t[6]=y):y=t[6];let D;return t[7]!==u||t[8]!==f||t[9]!==y?(D=r.jsx("div",{className:u,title:f,children:y}),t[7]=u,t[8]=f,t[9]=y,t[10]=D):D=t[10],D}),$s=i=>{const t=F.c(4),{command:e}=i,{getIconUrl:n}=je();if(!e){let l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(r.Fragment,{children:"—"}),t[0]=l):l=t[0],l}let s;if(t[1]!==e||t[2]!==n){const l=[],a=e.match(new RegExp("(?<=:)[^:]+(?=:)","g"))||[];for(let o=0;o<a.length;o++){let d=!1,u=!1;const f=a[o];let y=0;for(const D of f.split("+")){let C=D;if(y>0&&l.push(r.jsxs("span",{className:"relative inline-flex items-center justify-center w-3 h-3 border border-black bg-white text-black rounded-full mx-[-5px] z-20 align-middle plus-separator",children:[r.jsx("span",{className:"text-transparent select-text leading-none",children:"+"}),r.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",className:"absolute inset-0 m-auto block pointer-events-none","aria-hidden":!0,children:r.jsx("path",{d:"M5 2 v6 M2 5 h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})]},`plus-${o}-${y}`)),C[0]==="("&&(u=!0,C=C.replace(/[()]/g,"")),C==="_")l.push(r.jsx("span",{className:"inline-flex items-center flex-wrap ml-[-1px] mr-[-1px]",children:"|"},`separator-${o}-${y}`));else if(isNaN(C[0]))C[0]===C[0].toLowerCase()&&(d=!0),l.push(r.jsx(ks,{input:C,isHeld:u,isSlide:d},`command-${o}-${y}-${C}`));else{const x=n(C,u);l.push(r.jsx("img",{src:x,alt:C,className:"inline object-contain align-text-bottom h-4 w-4"},`direction-${o}-${y}-${C}`))}y++}}s=r.jsx("span",{className:"inline-flex items-center flex-wrap",children:l}),t[1]=e,t[2]=n,t[3]=s}else s=t[3];return s},Ds=i=>{const t=F.c(5),{note:e}=i,{availableIcons:n,getIconUrl:s}=je();if(!e){let a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(r.Fragment,{children:"—"}),t[0]=a):a=t[0],a}let l;if(t[1]!==n||t[2]!==s||t[3]!==e){const a=[],o=n.map(Rs).join("|"),d=new RegExp(`:(${o}):`,"g");let u=0,f,y=0;for(;f=d.exec(e);){const D=f.index,C=f[1];D>u&&(a.push(r.jsx("span",{children:e.slice(u,D)},`text-${y}`)),y++);const x=n.find(R=>R.code===C);if(x){const R=x.title||C.toUpperCase(),w=B("inline object-contain align-text-bottom h-4 w-4",x.iconClasses);a.push(r.jsx("img",{src:s(C),alt:C,title:R,className:B(w,"mx-0.5")},`${C}-${D}`))}u=d.lastIndex}u<e.length&&a.push(r.jsx("span",{children:e.slice(u)},`text-${y}`)),l=r.jsx(r.Fragment,{children:a}),t[1]=n,t[2]=s,t[3]=e,t[4]=l}else l=t[4];return l};function Rs(i){return i.code}const Ts=Pt,Is=qt,Hs=m.forwardRef((i,t)=>{const e=F.c(14);let n,s,l,a;e[0]!==i?({className:s,inset:l,children:n,...a}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l,e[4]=a):(n=e[1],s=e[2],l=e[3],a=e[4]);const o=l&&"pl-8";let d;e[5]!==s||e[6]!==o?(d=B("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",o,s),e[5]=s,e[6]=o,e[7]=d):d=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx($e,{className:"ml-auto h-4 w-4"}),e[8]=u):u=e[8];let f;return e[9]!==n||e[10]!==a||e[11]!==t||e[12]!==d?(f=r.jsxs(Oe,{ref:t,className:d,...a,children:[n,u]}),e[9]=n,e[10]=a,e[11]=t,e[12]=d,e[13]=f):f=e[13],f});Hs.displayName=Oe.displayName;const Ls=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx(et,{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});Ls.displayName=et.displayName;const St=m.forwardRef((i,t)=>{const e=F.c(11);let n,s,l;e[0]!==i?({className:n,sideOffset:l,...s}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);const a=l===void 0?4:l;let o;e[4]!==n?(o=B("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),e[4]=n,e[5]=o):o=e[5];let d;return e[6]!==s||e[7]!==t||e[8]!==a||e[9]!==o?(d=r.jsx(Kt,{children:r.jsx(Ye,{ref:t,sideOffset:a,className:o,...s})}),e[6]=s,e[7]=t,e[8]=a,e[9]=o,e[10]=d):d=e[10],d});St.displayName=Ye.displayName;const ke=m.forwardRef((i,t)=>{const e=F.c(11);let n,s,l;e[0]!==i?({className:n,inset:s,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);const a=s&&"pl-8";let o;e[4]!==n||e[5]!==a?(o=B("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a,n),e[4]=n,e[5]=a,e[6]=o):o=e[6];let d;return e[7]!==l||e[8]!==t||e[9]!==o?(d=r.jsx(Ze,{ref:t,className:o,...l}),e[7]=l,e[8]=t,e[9]=o,e[10]=d):d=e[10],d});ke.displayName=Ze.displayName;const Bs=m.forwardRef((i,t)=>{const e=F.c(14);let n,s,l,a;e[0]!==i?({className:l,children:s,checked:n,...a}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l,e[4]=a):(n=e[1],s=e[2],l=e[3],a=e[4]);let o;e[5]!==l?(o=B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),e[5]=l,e[6]=o):o=e[6];let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(at,{children:r.jsx(we,{className:"h-4 w-4"})})}),e[7]=d):d=e[7];let u;return e[8]!==n||e[9]!==s||e[10]!==a||e[11]!==t||e[12]!==o?(u=r.jsxs(tt,{ref:t,className:o,checked:n,...a,children:[d,s]}),e[8]=n,e[9]=s,e[10]=a,e[11]=t,e[12]=o,e[13]=u):u=e[13],u});Bs.displayName=tt.displayName;const Ms=m.forwardRef((i,t)=>{const e=F.c(12);let n,s,l;e[0]!==i?({className:s,children:n,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);let a;e[4]!==s?(a=B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),e[4]=s,e[5]=a):a=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(at,{children:r.jsx(Jt,{className:"h-2 w-2 fill-current"})})}),e[6]=o):o=e[6];let d;return e[7]!==n||e[8]!==l||e[9]!==t||e[10]!==a?(d=r.jsxs(st,{ref:t,className:a,...l,children:[o,n]}),e[7]=n,e[8]=l,e[9]=t,e[10]=a,e[11]=d):d=e[11],d});Ms.displayName=st.displayName;const Fs=m.forwardRef((i,t)=>{const e=F.c(11);let n,s,l;e[0]!==i?({className:n,inset:s,...l}=i,e[0]=i,e[1]=n,e[2]=s,e[3]=l):(n=e[1],s=e[2],l=e[3]);const a=s&&"pl-8";let o;e[4]!==n||e[5]!==a?(o=B("px-2 py-1.5 text-sm font-semibold",a,n),e[4]=n,e[5]=a,e[6]=o):o=e[6];let d;return e[7]!==l||e[8]!==t||e[9]!==o?(d=r.jsx(lt,{ref:t,className:o,...l}),e[7]=l,e[8]=t,e[9]=o,e[10]=d):d=e[10],d});Fs.displayName=lt.displayName;const _s=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("-mx-1 my-1 h-px bg-muted",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx(nt,{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});_s.displayName=nt.displayName;const kt=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("w-full caption-bottom text-sm",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:t,className:l,...s})}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});kt.displayName="Table";const $t=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("[&_tr]:border-b",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("thead",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});$t.displayName="TableHeader";const Dt=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("[&_tr:last-child]:border-0",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("tbody",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});Dt.displayName="TableBody";const Es=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("tfoot",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});Es.displayName="TableFooter";const de=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("tr",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});de.displayName="TableRow";const Rt=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("th",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});Rt.displayName="TableHead";const me=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("p-2 align-middle [&:has([role=checkbox])]:pr-0",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("td",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});me.displayName="TableCell";const Us=m.forwardRef((i,t)=>{const e=F.c(9);let n,s;e[0]!==i?({className:n,...s}=i,e[0]=i,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let l;e[3]!==n?(l=B("mt-4 text-sm text-muted-foreground",n),e[3]=n,e[4]=l):l=e[4];let a;return e[5]!==s||e[6]!==t||e[7]!==l?(a=r.jsx("caption",{ref:t,className:l,...s}),e[5]=s,e[6]=t,e[7]=l,e[8]=a):a=e[8],a});Us.displayName="TableCaption";const be=i=>{var u;const t=F.c(9),{value:e,text:n,forceNoSign:s,badges:l}=i,a=s===void 0?!1:s;let o;n!=null?o=n:e!=null?o=(!a&&e>0?"+":"")+e:o="—";const d=(u=n==null?void 0:n.toUpperCase)==null?void 0:u.call(n);if(d&&l&&l[d]){const f=`${l[d].className} w-12 inline-flex items-center justify-center`;let y;return t[0]!==o||t[1]!==f?(y=r.jsx(he,{className:f,children:o}),t[0]=o,t[1]=f,t[2]=y):y=t[2],y}if(e==null){let f;return t[3]!==o?(f=r.jsx(he,{className:"bg-gray-500 hover:bg-gray-600 text-white w-12 inline-flex items-center justify-center",children:o}),t[3]=o,t[4]=f):f=t[4],f}if(e>=0){let f;return t[5]!==o?(f=r.jsx(he,{className:"bg-green-700 text-white w-12 inline-flex items-center justify-center",children:o}),t[5]=o,t[6]=f):f=t[6],f}else{let f;return t[7]!==o?(f=r.jsx(he,{className:"bg-rose-700 text-white w-12 inline-flex items-center justify-center",children:o}),t[7]=o,t[8]=f):f=t[8],f}},As=i=>{const t=F.c(61),{moves:e,movesLoading:n,sortColumn:s,sortDirection:l,handleSort:a,renderCommand:o,renderNotes:d,visibleColumns:u,badges:f,getScrollElement:y}=i,D=Z.useRef(null);let C;t[0]!==f||t[1]!==o||t[2]!==d?(C=(L,V)=>{switch(V){case"character":return L.CharacterName||"—";case"stance":return L.Stance||"—";case"command":return o(L.Command);case"rawCommand":return L.Command||"—";case"hitLevel":return r.jsx(jt,{hitLevelString:L.HitLevel,maxIconsToShow:3});case"impact":return L.Impact??"—";case"damage":return L.DamageDec??"—";case"block":return r.jsx(be,{value:L.BlockDec,text:L.Block,badges:f});case"hit":return r.jsx(be,{value:L.HitDec,text:L.Hit,badges:f});case"counterHit":return r.jsx(be,{value:L.CounterHitDec,text:L.CounterHit,badges:f});case"guardBurst":return r.jsx(be,{value:L.GuardBurst,text:null,forceNoSign:!0,badges:f});case"notes":return r.jsx("div",{className:"max-w-full truncate overflow-x-hidden overflow-y-visible",children:d(L.Notes)});default:return"—"}},t[0]=f,t[1]=o,t[2]=d,t[3]=C):C=t[3];const x=C;let R;t[4]!==y?(R=y?y():null,t[4]=y,t[5]=R):R=t[5];const w=R;let W;t[6]!==w?(W=()=>w,t[6]=w,t[7]=W):W=t[7];let G;t[8]!==e.length||t[9]!==W?(G={count:e.length,getScrollElement:W,estimateSize:zs,overscan:12},t[8]=e.length,t[9]=W,t[10]=G):G=t[10];const P=ns(G);let _;t[11]!==e.length?(_={count:e.length,estimateSize:Vs,overscan:12},t[11]=e.length,t[12]=_):_=t[12];const h=as(_),g=!w||w.scrollHeight<=w.clientHeight+1,j=g?h:P,p=j.getVirtualItems(),N=j.getTotalSize();let $,E;t[13]!==j||t[14]!==w||t[15]!==g?($=()=>{const L=g?window:w;if(!L)return;let V;if(V=null,L instanceof Window){const O=()=>j.measure();return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)}else return V=new ResizeObserver(()=>j.measure()),V.observe(L),()=>V&&V.disconnect()},E=[w,j,g],t[13]=j,t[14]=w,t[15]=g,t[16]=$,t[17]=E):($=t[16],E=t[17]),Z.useEffect($,E);const b=kt,S="table-layout-fixed";let M;if(t[18]!==a||t[19]!==s||t[20]!==l||t[21]!==u){let L;t[23]!==a||t[24]!==s||t[25]!==l?(L=V=>{const O={};return V.width&&(O.width=V.width),V.minWidth&&(O.minWidth=V.minWidth),V.maxWidth&&(O.maxWidth=V.maxWidth),r.jsx(Rt,{className:V.className+" cursor-pointer select-none",style:O,onClick:()=>a(V.id),title:V.friendlyLabel?V.friendlyLabel:V.label,children:r.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r.jsx("span",{className:"whitespace-nowrap flex-1",children:V.label}),r.jsx("span",{className:"inline-flex w-3 justify-center",children:s===V.id?l==="asc"?r.jsx(Xt,{size:14}):r.jsx(Qt,{size:14}):null})]})},V.id)},t[23]=a,t[24]=s,t[25]=l,t[26]=L):L=t[26],M=u.map(L),t[18]=a,t[19]=s,t[20]=l,t[21]=u,t[22]=M}else M=t[22];let v;t[27]!==M?(v=r.jsx($t,{className:"sticky top-0 bg-card z-10",children:r.jsx(de,{className:"border-b-card-border",children:M})}),t[27]=M,t[28]=v):v=t[28];const U=Dt;let K;e:{if(n){let q;t[29]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx("div",{className:"flex justify-center items-center",children:"Loading moves..."}),t[29]=q):q=t[29];let Q;t[30]!==u.length?(Q=r.jsx(de,{children:r.jsx(me,{colSpan:u.length,className:"text-center h-24 p-2",children:q})}),t[30]=u.length,t[31]=Q):Q=t[31],K=Q;break e}else if(e.length===0){let q;t[32]!==u.length?(q=r.jsx(de,{children:r.jsx(me,{colSpan:u.length,className:"text-center h-24 p-2",children:"No moves found for this character or filter criteria."})}),t[32]=u.length,t[33]=q):q=t[33],K=q;break e}const L=p,V=L.length>0?L[0].start:0,O=L.length>0?N-L[L.length-1].end:0;if(L.length===0){let q;if(t[34]!==e||t[35]!==x||t[36]!==u){const X=e.slice(0,Math.min(30,e.length));let ee;t[38]!==x||t[39]!==u?(ee=pe=>r.jsx(de,{className:"border-b-card-border",children:u.map(re=>r.jsx(me,{className:re.className,style:{width:re.width,minWidth:re.minWidth,maxWidth:re.maxWidth},children:x(pe,re.id)},`${pe.ID}-${re.id}`))},pe.ID),t[38]=x,t[39]=u,t[40]=ee):ee=t[40],q=X.map(ee),t[34]=e,t[35]=x,t[36]=u,t[37]=q}else q=t[37];let Q;t[41]!==q?(Q=r.jsx(r.Fragment,{children:q}),t[41]=q,t[42]=Q):Q=t[42],K=Q;break e}let fe;t[43]!==V||t[44]!==u.length?(fe=V>0&&r.jsx(de,{children:r.jsx(me,{colSpan:u.length,style:{padding:0,border:0},children:r.jsx("div",{style:{height:V},"aria-hidden":!0})})}),t[43]=V,t[44]=u.length,t[45]=fe):fe=t[45];let oe;t[46]!==e||t[47]!==x||t[48]!==j||t[49]!==u?(oe=q=>{const Q=e[q.index];return r.jsx(de,{className:"border-b-card-border","data-index":q.index,ref:X=>{X&&j.measureElement(X)},children:u.map(X=>{const ee={};return X.width&&(ee.width=X.width),X.minWidth&&(ee.minWidth=X.minWidth),X.maxWidth&&(ee.maxWidth=X.maxWidth),r.jsx(me,{className:X.className,style:ee,children:x(Q,X.id)},`${Q.ID}-${X.id}`)})},Q.ID)},t[46]=e,t[47]=x,t[48]=j,t[49]=u,t[50]=oe):oe=t[50];let ue;t[51]!==O||t[52]!==u.length?(ue=O>0&&r.jsx(de,{children:r.jsx(me,{colSpan:u.length,style:{padding:0,border:0},children:r.jsx("div",{style:{height:O},"aria-hidden":!0})})}),t[51]=O,t[52]=u.length,t[53]=ue):ue=t[53],K=r.jsxs(r.Fragment,{children:[fe,L.map(oe),ue]})}let H;t[54]!==U||t[55]!==K?(H=r.jsx(U,{children:K}),t[54]=U,t[55]=K,t[56]=H):H=t[56];let ce;return t[57]!==b||t[58]!==v||t[59]!==H?(ce=r.jsxs(b,{ref:D,className:S,children:[v,H]}),t[57]=b,t[58]=v,t[59]=H,t[60]=ce):ce=t[60],ce};function zs(){return 40}function Vs(){return 40}const Js=()=>{var Le;const i=Zt(),{gameId:t,characterName:e}=i,n=Ot(),{selectedGame:s,setSelectedGameById:l,characters:a,setCharacters:o,selectedCharacterId:d,setSelectedCharacterId:u,availableIcons:f,getIconUrl:y,translateText:D}=je(),{getVisibleColumns:C,updateColumnVisibility:x}=ss(),[R,w]=m.useState([]),[W,G]=m.useState(!1),[P,_]=m.useState(null),[h,g]=m.useState("Loading..."),j=m.useRef(new Map),p=m.useCallback(c=>{if(c==null)return null;const k=j.current.get(c);return k||(j.current.set(c,c),c)},[]),[N,$]=m.useState(null),[E,b]=m.useState("asc"),[S,M]=m.useState([]),[v,U]=m.useState(!0),K=C(),H=m.useMemo(()=>d!==-1?K.filter(c=>c.id!=="character"):K,[K,d]);m.useEffect(()=>{d===-1?x("character",!0):d!==null&&x("character",!1)},[d,x]),m.useEffect(()=>{d!==-1&&N==="character"&&$(null)},[d,N]);const ce=m.useCallback(()=>{U(c=>!c)},[]);m.useEffect(()=>{if(d!==null&&a.length>0&&s.id){const c=a.find(k=>k.id===d);if(d===-1){const k=encodeURIComponent("All"),I=e?encodeURIComponent(decodeURIComponent(e)):void 0;k!==I&&n(`/${s.id}/${k}`,{replace:!0})}else if(c){const k=encodeURIComponent(c.name),I=e?encodeURIComponent(decodeURIComponent(e)):void 0;k!==I&&n(`/${s.id}/${k}`,{replace:!0})}}},[d,a,s.id,n,e]),m.useEffect(()=>{if(s.id){if(t&&t!==s.id&&ls.find(k=>k.id===t)){l(t);return}if(e&&a.length>0&&(d===null||!a.some(c=>c.id===d)&&d!==-1)){const c=decodeURIComponent(e);if(c.toLowerCase()==="all")u(-1);else{const k=a.find(I=>I.name.toLowerCase()===c.toLowerCase());if(k)u(k.id);else{const I=a[0];u(I?I.id:null)}}}else if(!e&&a.length>0&&(d===null||!a.some(c=>c.id===d)&&d!==-1)){const c=a[0];c&&u(c.id)}}},[t,e,s.id,a,d,l,u]);const L=Z.useRef(new Map);m.useEffect(()=>{if(w([]),s!=null&&s.id&&d!==null){G(!0),_(null);const c=new AbortController;return(async()=>{var I,z;try{const J=`${s.id}::${d}`;if(L.current.has(J)){w(L.current.get(J));return}let Y=[];const le=(T,te,ie)=>{const se=T.Command!=null?String(T.Command):null,A=se?D(se):null;return{ID:Number(T.ID),Command:p(A),CharacterId:te,CharacterName:p(ie),Stance:p(T.Stance?String(T.Stance):null),HitLevel:p(T.HitLevel?String(T.HitLevel):null),Impact:T.Impact!=null?Number(T.Impact):0,Damage:p(T.Damage!=null?String(T.Damage):null),DamageDec:T.DamageDec!=null?Number(T.DamageDec):null,Block:p(T.Block!=null?String(T.Block):null),BlockDec:T.BlockDec!=null?Number(T.BlockDec):null,Hit:p(T.Hit!=null?String(T.Hit):null),HitDec:T.HitDec!=null?Number(T.HitDec):null,HitString:p(T.Hit!=null?String(T.Hit):null),CounterHit:p(T.CounterHit!=null?String(T.CounterHit):null),CounterHitDec:T.CounterHitDec!=null?Number(T.CounterHitDec):null,CounterHitString:p(T.CounterHit!=null?String(T.CounterHit):null),GuardBurst:T.GuardBurst!=null?Number(T.GuardBurst):null,Notes:p(T.Notes!=null?String(T.Notes):null)}};if(d===-1){const T=`/Games/${encodeURIComponent(s.id)}/Characters.json`,te=await fetch(T,{signal:c.signal});if(!te.ok)throw new Error(`Failed to fetch characters list: ${te.status} ${te.statusText}`);const ie=await te.json(),se=(Array.isArray(ie)?ie:[]).map(ae=>({id:Number(ae.id),name:String(ae.name)})),A=se.map(ae=>ae.id).filter(ae=>!isNaN(ae)),ne=[];for(const ae of A){const Ht=`/Games/${encodeURIComponent(s.id)}/Characters/${encodeURIComponent(String(ae))}.json`,Be=await fetch(Ht,{signal:c.signal});if(!Be.ok)continue;const Ce=await Be.json();if(Array.isArray(Ce)){const Lt=((I=se.find(ge=>ge.id===ae))==null?void 0:I.name)||null;for(let ge=0;ge<Ce.length;ge++)ne.push(le(Ce[ge],ae,Lt))}}Y=ne,L.current.set(J,Y),w(Y)}else{const T=`/Games/${encodeURIComponent(s.id)}/Characters/${encodeURIComponent(String(d))}.json`,te=await fetch(T,{signal:c.signal});if(!te.ok)throw new Error(`Failed to fetch moves: ${te.status} ${te.statusText}`);const ie=await te.json(),se=((z=a.find(ne=>ne.id===d))==null?void 0:z.name)||null,A=Array.isArray(ie)?ie.map(ne=>le(ne,d,se)):[];L.current.set(J,A),w(A)}}catch(J){if((J==null?void 0:J.name)==="AbortError")return;_(J instanceof Error?J.message:`Unknown error loading moves for character ID ${d}`),w([])}finally{G(!1)}})(),()=>c.abort()}else w([]),G(!1)},[s==null?void 0:s.id,d,D,a,p]);const V=m.useCallback(c=>{N===c?b(k=>k==="asc"?"desc":"asc"):($(c),b("asc"))},[N]),O=m.useCallback(c=>r.jsx($s,{command:c}),[]),fe=m.useCallback(c=>r.jsx(Ds,{note:c}),[]),oe=m.useMemo(()=>bt[s.id]??{fields:[]},[s.id]),ue=m.useMemo(()=>new Map(oe.fields.map(c=>[c.id,c])),[oe.fields]),q=m.useMemo(()=>{const c=oe.customOperators??[],k=new Map;for(const I of Nt)k.set(I.id,I);for(const I of c)k.set(I.id,I);return Array.from(k.values())},[oe]),Q=m.useMemo(()=>wt(q),[q]),X=m.useCallback((c,k)=>{const I=ue.get(k),z=(I==null?void 0:I.type)??"text";switch(k){case"character":return{string:c.CharacterName||null,number:null,type:z};case"stance":return{string:c.Stance,number:null,type:z};case"command":case"rawCommand":return{string:c.Command,number:null,type:z};case"input":return{string:[c.Stance,c.Command].filter(Boolean).join(" ")||null,number:null,type:z};case"hitLevel":return{string:c.HitLevel,number:null,type:z};case"impact":return{string:c.Impact!=null?String(c.Impact):null,number:c.Impact??null,type:z};case"damage":return{string:c.DamageDec!=null?String(c.DamageDec):c.Damage,number:c.DamageDec??null,type:z};case"block":return{string:c.BlockDec!=null?String(c.BlockDec):c.Block,number:c.BlockDec??null,type:z};case"hit":return{string:c.HitDec!=null?String(c.HitDec):c.Hit,number:c.HitDec??null,type:z};case"counterHit":return{string:c.CounterHitDec!=null?String(c.CounterHitDec):c.CounterHit,number:c.CounterHitDec??null,type:z};case"guardBurst":return{string:c.GuardBurst!=null?String(c.GuardBurst):null,number:c.GuardBurst??null,type:z};case"notes":return{string:c.Notes,number:null,type:z};default:return{string:null,number:null,type:z}}},[ue]),ee=m.useMemo(()=>S.map(c=>({...c,value1:c.value,value2:c.value2})),[S]),pe=m.useCallback((c,k)=>{const I=Q.get(k.condition);if(!I)return!0;const z=X(c,k.field);return I.test({fieldType:z.type,fieldString:z.string,fieldNumber:z.number,value:k.value1,value2:k.value2})},[Q,X]),re=m.useMemo(()=>({character:{getter:c=>c.CharacterName,type:"string"},stance:{getter:c=>c.Stance,type:"string"},command:{getter:c=>c.Command,type:"string"},rawCommand:{getter:c=>c.Command,type:"string"},input:{getter:c=>[c.Stance,c.Command].filter(Boolean).join(" "),type:"string"},hitLevel:{getter:c=>c.HitLevel,type:"string"},impact:{getter:c=>c.Impact,type:"number"},damage:{getter:c=>c.DamageDec,type:"number"},block:{getter:c=>c.BlockDec,type:"number"},hit:{getter:c=>c.HitDec,type:"number"},counterHit:{getter:c=>c.CounterHitDec,type:"number"},guardBurst:{getter:c=>c.GuardBurst,type:"number"},notes:{getter:c=>c.Notes,type:"string"}}),[]),Re=m.useMemo(()=>{if(!N||R.length===0)return R;const c=re[N];return c?R.map(k=>({...k,_sortValue:c.getter(k)})):R},[R,N,re]),Te=m.useCallback((c,k)=>{const I=c==="asc"?1:-1;return k==="number"?(z,J)=>{const Y=z._sortValue,le=J._sortValue;return Y==null&&le==null?0:Y==null?I:le==null?-I:(Y-le)*I}:(z,J)=>{const Y=z._sortValue,le=J._sortValue;return Y==null&&le==null?0:Y==null?I:le==null?-I:String(Y).localeCompare(String(le))*I}},[]),xe=m.useMemo(()=>{const c=N?Re:R;if(c.length===0)return[];let k=c;if(ee.length>0&&(k=k.filter(I=>ee.every(z=>pe(I,z)))),N){k===c&&(k=[...k]);const I=re[N];if(I){const z=Te(E,I.type);k.sort(z)}}return k},[Re,R,ee,N,E,pe,Te,re]),Ie=m.useCallback(c=>{const k=xe;if(!k||k.length===0)return;const I=H.map(A=>A.label),z=H.map(A=>A.id),J=A=>{if(A==null)return"";const ne=String(A);return/[,"\n]/.test(ne)?'"'+ne.replace(/"/g,'""')+'"':ne},Y=[];Y.push(I.map(J).join(","));for(const A of k){const ne=z.map(ae=>{switch(ae){case"character":return A.CharacterName;case"stance":return A.Stance;case"command":case"rawCommand":return A.Command;case"input":return[A.Stance,A.Command].filter(Boolean).join(" ");case"hitLevel":return A.HitLevel;case"impact":return A.Impact;case"damage":return A.DamageDec??A.Damage;case"block":return A.BlockDec??A.Block;case"hit":return A.HitDec??A.Hit;case"counterHit":return A.CounterHitDec??A.CounterHit;case"guardBurst":return A.GuardBurst;case"notes":return A.Notes;default:return""}}).map(J).join(",");Y.push(ne)}const le=Y.join(`
`),T=new Blob([le],{type:c==="excel"?"application/vnd.ms-excel":"text/csv;charset=utf-8;"}),te=c==="excel"?"xls":"csv",ie=URL.createObjectURL(T),se=document.createElement("a");se.href=ie,se.download=`${s.id||"export"}_${d===-1?"All":d}.${te}`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(ie)},[xe,H,s.id,d]),Tt=m.useCallback(c=>{M(c)},[]);if(m.useEffect(()=>{fetch("/timestamp.json").then(c=>c.json()).then(c=>{g(c.timestamp)}).catch(()=>{g("Unknown")})},[]),P)return r.jsxs(Me,{className:"border-destructive/20",children:[r.jsxs(Fe,{children:[r.jsx(_e,{className:"text-destructive",children:"Error"}),r.jsx(Ee,{children:P})]}),r.jsx(Ue,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Try another character or game, or refresh the page."})})]});const It=d===-1?"All Characters":d?(Le=a.find(c=>c.id===d))==null?void 0:Le.name:null,He=m.useRef(null);return r.jsx("div",{className:"space-y-6 h-full flex flex-col pl-4 pr-4 flex-grow",children:d?r.jsxs(Me,{className:"h-full flex flex-col overflow-hidden border border-card-border",children:[r.jsxs(Fe,{className:"pb-2 flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center cursor-pointer group title-interactive",onClick:ce,title:v?"Click to hide filters":"Click to show filters",children:[r.jsxs(_e,{className:"flex items-center",children:[It||"Character"," ","Frame Data",r.jsx($e,{className:B("ml-2 h-4 w-4 text-muted-foreground transition-transform duration-200 group-hover:text-foreground",v?"transform rotate-90":"")})]}),r.jsx(bs,{count:S.length})]}),r.jsxs(Ee,{className:"m-0 flex items-center gap-2",children:[r.jsxs("span",{children:["Total Moves: ",xe.length," ",R.length!==xe.length?`(filtered from ${R.length})`:""]}),r.jsxs(Ts,{children:[r.jsx(Is,{asChild:!0,children:r.jsxs("button",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-md border bg-gradient-to-r from-secondary/80 via-secondary to-secondary/80 hover:from-secondary hover:via-secondary hover:to-secondary/90 shadow-sm hover:shadow transition-colors transition-shadow",title:"Export",children:[r.jsx("span",{className:"flex items-center justify-center h-5 w-5 rounded-sm bg-background/40 border border-border/50 mr-1",children:r.jsx(Yt,{className:"h-3.5 w-3.5"})}),r.jsx("span",{className:"font-medium tracking-wide",children:"Export"})]})}),r.jsxs(St,{align:"end",className:"bg-card/95 backdrop-blur-sm border-border shadow-lg",children:[r.jsx(ke,{onClick:()=>Ie("csv"),children:"Export to CSV"}),r.jsx(ke,{onClick:()=>Ie("excel"),children:"Export to Excel"})]})]})]})]}),r.jsx("div",{className:B("filter-container",v?"visible":"hidden",S.length===0?"empty":""),children:r.jsx(Ct,{onFiltersChange:Tt,moves:R})})]}),r.jsx(Ue,{className:"flex-1 min-h-0 p-0 flex flex-col overflow-hidden",children:r.jsx("div",{className:"overflow-y-auto flex-1 min-h-0",ref:He,children:r.jsx(As,{moves:xe,movesLoading:W,sortColumn:N,sortDirection:E,handleSort:V,renderCommand:O,renderNotes:fe,visibleColumns:H,badges:s.badges,getScrollElement:()=>He.current})})}),r.jsxs(es,{className:"text-xs text-muted-foreground flex-shrink-0",children:["Website last deployed: ",h]})]}):r.jsx("div",{className:"flex items-center justify-center h-48 border rounded-lg bg-muted/40",children:r.jsx("p",{className:"text-muted-foreground",children:a.length>0?"Select a character to view frame data":"No characters loaded."})})})};export{Js as FrameDataTable};
